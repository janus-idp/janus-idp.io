"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7122],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(a),d=r,h=u["".concat(l,".").concat(d)]||u[d]||g[d]||s;return a?n.createElement(h,o(o({ref:t},p),{},{components:a})):n.createElement(h,o({ref:t},p))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,o=new Array(s);o[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:r,o[1]=i;for(var c=2;c<s;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},3885:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));const s={title:"Exposing your 3scale APIs through the Backstage catalog",authors:["fmenesesg"],tags:["3scale","Plugins"],description:"Exposing your 3scale APIs through the Backstage catalog"},o="Exposing your 3scale APIs through the Backstage catalog",i={permalink:"/blog/2023/02/28/exposing-your-3scale-apis",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2023-02-28-exposing-your-3scale-apis/index.mdx",source:"@site/blog/2023-02-28-exposing-your-3scale-apis/index.mdx",title:"Exposing your 3scale APIs through the Backstage catalog",description:"Exposing your 3scale APIs through the Backstage catalog",date:"2023-02-28T00:00:00.000Z",formattedDate:"February 28, 2023",tags:[{label:"3scale",permalink:"/blog/tags/3-scale"},{label:"Plugins",permalink:"/blog/tags/plugins"}],readingTime:1.77,hasTruncateMarker:!1,authors:[{name:"Francisco Meneses",title:"Plugin Contributor",url:"https://github.com/fmenesesg",imageURL:"https://github.com/fmenesesg.png",key:"fmenesesg"}],frontMatter:{title:"Exposing your 3scale APIs through the Backstage catalog",authors:["fmenesesg"],tags:["3scale","Plugins"],description:"Exposing your 3scale APIs through the Backstage catalog"},prevItem:{title:"Janus Backstage Images Now Available on quay.io",permalink:"/blog/2023/03/01/janus-backstage-images-on-quay"},nextItem:{title:"Exploring Quay registry in Backstage",permalink:"/blog/2023/02/20/exploring-quay-registry-in-backstage"}},l={authorsImageUrls:[void 0]},c=[{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Verify",id:"verify",level:3},{value:"Next steps",id:"next-steps",level:2}],p={toc:c},u="wrapper";function g(e){let{components:t,...s}=e;return(0,r.kt)(u,(0,n.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Backstage has many features that come out of the box; one of which is the API catalog. The API catalog is responsible for displaying ",(0,r.kt)("a",{parentName:"p",href:"https://backstage.io/docs/features/software-catalog/system-model#api"},"API entities"),", which are defined in YAML format and can be stored on a git repository and used as a source to register API entities in the catalog."),(0,r.kt)("p",null,"But, what happens when you already have an API Manager like ",(0,r.kt)("a",{parentName:"p",href:"https://www.redhat.com/en/technologies/jboss-middleware/3scale"},"3scale")," that handles your API definitions? To better integrate 3scale and Backstage, the Janus community developed a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/janus-idp/backstage-plugins/tree/main/plugins/3scale-backend"},"3scale backend plugin")," that imports APIs from 3scale into the Backstage catalog as API entities."),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("p",null,"With this plugin, your APIs from multiple 3scale tenants will be available in the Backstage catalog API entities."),(0,r.kt)("p",null,"The first step is to install the backend plugin. Navigate to the root directory of your Backstage instance and run the following command to add the plugin."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn workspace backend add @janus-idp/backstage-plugin-3scale-backend\n")),(0,r.kt)("h3",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"The 3scale Backstage plugin allows configuration of one or many providers using the ",(0,r.kt)("inlineCode",{parentName:"p"},"app-config.yaml")," configuration file. Use a ",(0,r.kt)("inlineCode",{parentName:"p"},"threeScaleApiEntity")," marker to start configuring them:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'filename="app-config.yaml" {2-11}',filename:'"app-config.yaml"',"{2-11}":!0},'catalog:\n  providers:\n    threeScaleApiEntity:\n      dev:\n        baseUrl: https://<TENANT>-admin.3scale.net\n        accessToken: <ACCESS_TOKEN>\n        schedule: # optional; same options as in TaskScheduleDefinition\n          # supports cron, ISO duration, "human duration" as used in code\n          frequency: { minutes: 1 }\n          # supports ISO duration, "human duration" as used in code\n          timeout: { minutes: 1 }\n')),(0,r.kt)("p",null,"Add the 3scale entity provider to the catalog builder at ",(0,r.kt)("inlineCode",{parentName:"p"},"packages/backend/src/plugins/catalog.ts"),", once done, the catalog plugin should be able to load 3scale products as entities in the Backstage catalog:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'filename="packages/backend/src/plugins/catalog.ts" {1,7-12}',filename:'"packages/backend/src/plugins/catalog.ts"',"{1,7-12}":!0},"import { ThreeScaleApiEntityProvider } from '@janus-idp/backstage-plugin-3scale-backend';\n\n/ ..\n  const builder = await CatalogBuilder.create(env);\n\n  /** ... other processors and/or providers ... */\n  builder.addEntityProvider(\n    ThreeScaleApiEntityProvider.fromConfig(env.config, {\n      logger: env.logger,\n      scheduler: env.scheduler\n    }),\n  );\n\n  const { processingEngine, router } = await builder.build();\n/ ..\n")),(0,r.kt)("h3",{id:"verify"},"Verify"),(0,r.kt)("p",null,"Now your API entities will be available in the Backstage catalog."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"API entities in the Backstage catalog",src:a(4768).Z,width:"1600",height:"339"})),(0,r.kt)("h2",{id:"next-steps"},"Next steps"),(0,r.kt)("p",null,"To contribute to this plugin, report issues, or provide feedback, visit our ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/janus-idp/backstage-plugins/tree/main/plugins/3scale-backend"},"GitHub repository")," or contact us on the ",(0,r.kt)("a",{parentName:"p",href:"https://join.slack.com/t/janus-idp/shared_invite/zt-1pxtehxom-fCFtF9rRe3vFqUiFFeAkmg"},"Janus IDP Slack"),".  Learn more about other Backstage plugins in the Janus community ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/janus-idp/backstage-plugins"},"here"),"."))}g.isMDXComponent=!0},4768:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/3scale-487716956d95d71695aadcfcd7b6acb5.png"}}]);